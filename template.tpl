___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cookiefy_consent_mode",
  "version": 1,
  "securityGroups": [],
  "displayName": "Cookiefy - Consent Mode",
  "brand": {
    "id": "brand_cookiefy",
    "displayName": "Cookiefy",
    "thumbnail": "data:image/png;base64,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"
  },
  "description": "Cookiefy cookie consent banner with Google Consent Mode v2 support. Manages user consent for advertising, analytics, and functional cookies.",
  "containerContexts": [
    "WEB"
  ],
  "categories": [
    "TAG_MANAGEMENT",
    "PERSONALIZATION"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "domainId",
    "displayName": "Domain ID",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "help": "Your Cookiefy Domain ID. Find this in your Cookiefy dashboard."
  },
  {
    "type": "GROUP",
    "name": "consentSettings",
    "displayName": "Default Consent Settings",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "SELECT",
        "name": "defaultAdStorage",
        "displayName": "Ad Storage (default)",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "denied",
            "displayValue": "Denied"
          },
          {
            "value": "granted",
            "displayValue": "Granted"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "denied",
        "help": "Default consent state for advertising cookies (ad_storage)"
      },
      {
        "type": "SELECT",
        "name": "defaultAdUserData",
        "displayName": "Ad User Data (default)",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "denied",
            "displayValue": "Denied"
          },
          {
            "value": "granted",
            "displayValue": "Granted"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "denied",
        "help": "Default consent state for sending user data to Google for ads (ad_user_data)"
      },
      {
        "type": "SELECT",
        "name": "defaultAdPersonalization",
        "displayName": "Ad Personalization (default)",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "denied",
            "displayValue": "Denied"
          },
          {
            "value": "granted",
            "displayValue": "Granted"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "denied",
        "help": "Default consent state for personalized advertising (ad_personalization)"
      },
      {
        "type": "SELECT",
        "name": "defaultAnalyticsStorage",
        "displayName": "Analytics Storage (default)",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "denied",
            "displayValue": "Denied"
          },
          {
            "value": "granted",
            "displayValue": "Granted"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "denied",
        "help": "Default consent state for analytics cookies (analytics_storage)"
      },
      {
        "type": "SELECT",
        "name": "defaultFunctionalityStorage",
        "displayName": "Functionality Storage (default)",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "denied",
            "displayValue": "Denied"
          },
          {
            "value": "granted",
            "displayValue": "Granted"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "denied",
        "help": "Default consent state for functionality cookies (functionality_storage)"
      },
      {
        "type": "SELECT",
        "name": "defaultPersonalizationStorage",
        "displayName": "Personalization Storage (default)",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "denied",
            "displayValue": "Denied"
          },
          {
            "value": "granted",
            "displayValue": "Granted"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "denied",
        "help": "Default consent state for personalization cookies (personalization_storage)"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "regionSettings",
    "displayName": "Region-Specific Settings",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "SIMPLE_TABLE",
        "name": "regionOverrides",
        "displayName": "Region Overrides",
        "simpleTableColumns": [
          {
            "defaultValue": "",
            "displayName": "Region (ISO code)",
            "name": "region",
            "type": "TEXT"
          },
          {
            "defaultValue": "denied",
            "displayName": "Ad Storage",
            "name": "adStorage",
            "type": "SELECT",
            "selectItems": [
              {
                "value": "denied",
                "displayValue": "Denied"
              },
              {
                "value": "granted",
                "displayValue": "Granted"
              }
            ]
          },
          {
            "defaultValue": "denied",
            "displayName": "Analytics Storage",
            "name": "analyticsStorage",
            "type": "SELECT",
            "selectItems": [
              {
                "value": "denied",
                "displayValue": "Denied"
              },
              {
                "value": "granted",
                "displayValue": "Granted"
              }
            ]
          }
        ],
        "help": "Set different default consent for specific regions (e.g., \u0027US\u0027 for United States, \u0027SE\u0027 for Sweden). Leave empty to use global defaults."
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "advancedSettings",
    "displayName": "Advanced Settings",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "CHECKBOX",
        "name": "enableUrlPassthrough",
        "checkboxText": "Enable URL Passthrough",
        "simpleValueType": true,
        "defaultValue": false,
        "help": "Pass ad click information through URL parameters when ad_storage is denied. Recommended for better conversion tracking."
      },
      {
        "type": "CHECKBOX",
        "name": "enableAdsDataRedaction",
        "checkboxText": "Enable Ads Data Redaction",
        "simpleValueType": true,
        "defaultValue": false,
        "help": "Further redact ad data when ad_storage is denied."
      },
      {
        "type": "TEXT",
        "name": "waitForUpdate",
        "displayName": "Wait for Update (ms)",
        "simpleValueType": true,
        "defaultValue": "500",
        "help": "Time in milliseconds to wait for consent update before firing tags. Default: 500ms"
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// Cookiefy GTM Consent Mode Template
// Version 1.0.0

const log = require('logToConsole');
const setDefaultConsentState = require('setDefaultConsentState');
const updateConsentState = require('updateConsentState');
const getCookieValues = require('getCookieValues');
const injectScript = require('injectScript');
const callInWindow = require('callInWindow');
const setInWindow = require('setInWindow');
const copyFromWindow = require('copyFromWindow');
const gtagSet = require('gtagSet');
const getContainerVersion = require('getContainerVersion');
const JSON = require('JSON');

// Get template parameters
const domainId = data.domainId;
const waitForUpdate = data.waitForUpdate || 500;

// Build default consent state
const defaultConsent = {
  'ad_storage': data.defaultAdStorage || 'denied',
  'ad_user_data': data.defaultAdUserData || 'denied',
  'ad_personalization': data.defaultAdPersonalization || 'denied',
  'analytics_storage': data.defaultAnalyticsStorage || 'denied',
  'functionality_storage': data.defaultFunctionalityStorage || 'denied',
  'personalization_storage': data.defaultPersonalizationStorage || 'denied',
  'security_storage': 'granted',
  'wait_for_update': waitForUpdate
};

// Apply region-specific overrides
if (data.regionOverrides && data.regionOverrides.length > 0) {
  data.regionOverrides.forEach(function(override) {
    if (override.region) {
      const regionConsent = {
        'ad_storage': override.adStorage || 'denied',
        'ad_user_data': override.adStorage || 'denied',
        'ad_personalization': override.adStorage || 'denied',
        'analytics_storage': override.analyticsStorage || 'denied',
        'region': [override.region]
      };
      setDefaultConsentState(regionConsent);
      log('Cookiefy: Set region override for ' + override.region);
    }
  });
}

// Set global default consent state
setDefaultConsentState(defaultConsent);
log('Cookiefy: Default consent state set');

// Set advanced options
if (data.enableUrlPassthrough) {
  gtagSet('url_passthrough', true);
  log('Cookiefy: URL passthrough enabled');
}

if (data.enableAdsDataRedaction) {
  gtagSet('ads_data_redaction', true);
  log('Cookiefy: Ads data redaction enabled');
}

// Check for existing consent cookie
const cookieName = 'cookiefy_consent';
const consentCookie = getCookieValues(cookieName);

if (consentCookie && consentCookie.length > 0) {
  // Parse existing consent and update state
  const savedConsent = JSON.parse(consentCookie[0]);
  
  if (savedConsent) {
    const consentUpdate = {
      'ad_storage': savedConsent.marketing ? 'granted' : 'denied',
      'ad_user_data': savedConsent.marketing ? 'granted' : 'denied',
      'ad_personalization': savedConsent.marketing ? 'granted' : 'denied',
      'analytics_storage': savedConsent.analytics ? 'granted' : 'denied',
      'functionality_storage': savedConsent.preference ? 'granted' : 'denied',
      'personalization_storage': savedConsent.preference ? 'granted' : 'denied',
      'security_storage': 'granted'
    };
    
    updateConsentState(consentUpdate);
    log('Cookiefy: Restored consent from cookie');
  }
}

// Set up config for Cookiefy banner
setInWindow('cookieConsentConfig', {
  domainId: domainId,
  enableGoogleConsentMode: false // Disable in banner since GTM handles it
}, true);

// Function to handle consent updates from Cookiefy banner
// Reads consent from __cookiefyConsentState which banner writes before calling
const onConsentUpdate = function() {
  // Read the pre-set consent values from window
  const marketing = copyFromWindow('__cookiefyConsentState_marketing');
  const analytics = copyFromWindow('__cookiefyConsentState_analytics');
  const preference = copyFromWindow('__cookiefyConsentState_preference');
  
  log('Cookiefy GTM: Reading consent - marketing=' + marketing + ', analytics=' + analytics + ', preference=' + preference);
  
  const consentUpdate = {
    'ad_storage': marketing ? 'granted' : 'denied',
    'ad_user_data': marketing ? 'granted' : 'denied',
    'ad_personalization': marketing ? 'granted' : 'denied',
    'analytics_storage': analytics ? 'granted' : 'denied',
    'functionality_storage': preference ? 'granted' : 'denied',
    'personalization_storage': preference ? 'granted' : 'denied',
    'security_storage': 'granted'
  };
  
  updateConsentState(consentUpdate);
  log('Cookiefy: Consent updated via GTM');
};

// Store callback for banner to call
setInWindow('__cookiefyGtmCallback', onConsentUpdate, true);

// Inject Cookiefy scripts
const coreScriptUrl = 'https://cdn.cookiefy.app/cookiefy-core.min.js';
const uiScriptUrl = 'https://cdn.cookiefy.app/cookiefy-ui.min.js';

injectScript(coreScriptUrl, function() {
  log('Cookiefy: Core script loaded');
  
  injectScript(uiScriptUrl, function() {
    log('Cookiefy: UI script loaded');
    data.gtmOnSuccess();
  }, function() {
    log('Cookiefy: Failed to load UI script');
    data.gtmOnFailure();
  }, 'cookiefyUi');
  
}, function() {
  log('Cookiefy: Failed to load core script');
  data.gtmOnFailure();
}, 'cookiefyCore');


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_consent",
        "versionId": "1"
      },
      "param": [
        {
          "key": "consentTypes",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_user_data"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_personalization"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "analytics_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "functionality_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "personalization_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "security_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "cookieAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "cookieNames",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "cookiefy_consent"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://cdn.cookiefy.app/*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "cookieConsentConfig"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "CookiefyCore"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "__cookiefyGtmCallback"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "__cookiefyConsentState_marketing"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "__cookiefyConsentState_analytics"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "__cookiefyConsentState_preference"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "write_data_layer",
        "versionId": "1"
      },
      "param": []
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_container_data",
        "versionId": "1"
      },
      "param": []
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: Sets default consent to denied
  code: |-
    const mockData = {
      domainId: 'test-domain-id',
      defaultAdStorage: 'denied',
      defaultAdUserData: 'denied',
      defaultAdPersonalization: 'denied',
      defaultAnalyticsStorage: 'denied',
      defaultFunctionalityStorage: 'denied',
      defaultPersonalizationStorage: 'denied',
      waitForUpdate: '500'
    };

    runCode(mockData);

    assertApi('setDefaultConsentState').wasCalled();
- name: Reads existing consent cookie
  code: |-
    mock('getCookieValues', function() {
      return ['{"necessary":true,"preference":true,"analytics":true,"marketing":false}'];
    });

    const mockData = {
      domainId: 'test-domain-id',
      defaultAdStorage: 'denied',
      defaultAnalyticsStorage: 'denied'
    };

    runCode(mockData);

    assertApi('updateConsentState').wasCalled();


___NOTES___

Cookiefy Consent Mode GTM Template
Version: 1.0.0
Author: Cookiefy (cookiefy.app)

This template integrates Cookiefy cookie consent banner with Google Consent Mode v2.

Features:
- Sets default consent state before any tags fire
- Reads existing consent from Cookiefy cookie
- Updates consent when user interacts with banner
- Supports all Google Consent Mode v2 consent types
- Region-specific consent defaults
- URL passthrough and ads data redaction options

Usage:
1. Add this tag to your GTM container
2. Set trigger to "Consent Initialization - All Pages"
3. Enter your Cookiefy Domain ID
4. Configure default consent settings
5. Publish your container

Support: support@cookiefy.app
Documentation: https://cookiefy.app/docs/gtm-integration


